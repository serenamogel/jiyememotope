<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Plotly Dash: How to reset the &amp;quot;n_clicks&amp;quot; attribute of a dash-html.button? -</title><meta name=robots content="index,follow,noarchive"><meta name=description content="I have a basic datatable in plotly/dash. My goal is to upload (or print for the sake of the example...) after I press the upload-button.
The issue is, that I can't figure out how to get the n_clicks attribute of the button back to zero. So what happens is that after I clicked the button for the first time it prints continuously whenever something changes (row added or number changed/added), but what I want is for it to print only once whenever I click the button."><meta name=author content="Martina Birk"><link rel="preload stylesheet" as=style href=https://assets.cdnweb.info/hugo/paper/css/app.css><link rel="preload stylesheet" as=style href=https://assets.cdnweb.info/hugo/paper/css/an-old-hope.min.css><script defer src=https://assets.cdnweb.info/hugo/paper/js/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=./theme.png><link rel=icon href=./favicon.ico><link rel=apple-touch-icon href=./apple-touch-icon.png><meta name=generator content="Hugo 0.98.0"><meta property="og:title" content="Plotly Dash: How to reset the &amp;quot;n_clicks&amp;quot; attribute of a dash-html.button?"><meta property="og:description" content="I have a basic datatable in plotly/dash. My goal is to upload (or print for the sake of the example...) after I press the upload-button. The issue is, that I can't figure out how to get the n_clicks attribute of the button back to zero. So what happens is that after I clicked the button"><meta property="og:type" content="article"><meta property="og:url" content="/plotly-dash-how-to-reset-the-n-clicks-attribute-of-a-dash-html-button.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-06-28T00:00:00+00:00"><meta property="article:modified_time" content="2024-06-28T00:00:00+00:00"><meta itemprop=name content="Plotly Dash: How to reset the &amp;quot;n_clicks&amp;quot; attribute of a dash-html.button?"><meta itemprop=description content="I have a basic datatable in plotly/dash. My goal is to upload (or print for the sake of the example...) after I press the upload-button. The issue is, that I can't figure out how to get the n_clicks attribute of the button back to zero. So what happens is that after I clicked the button"><meta itemprop=datePublished content="2024-06-28T00:00:00+00:00"><meta itemprop=dateModified content="2024-06-28T00:00:00+00:00"><meta itemprop=wordCount content="534"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Plotly Dash: How to reset the &amp;quot;n_clicks&amp;quot; attribute of a dash-html.button?"><meta name=twitter:description content="I have a basic datatable in plotly/dash. My goal is to upload (or print for the sake of the example...) after I press the upload-button. The issue is, that I can't figure out how to get the n_clicks attribute of the button back to zero. So what happens is that after I clicked the button"></head><body class=not-ready data-menu=true><header class=header><p class=logo><a class=site-name href=./index.html>SnapVibe</a><a class=btn-dark></a></p><script>let bodyClx=document.body.classList,btnDark=document.querySelector(".btn-dark"),sysDark=window.matchMedia("(prefers-color-scheme: dark)"),darkVal=localStorage.getItem("dark"),setDark=e=>{bodyClx[e?"add":"remove"]("dark"),localStorage.setItem("dark",e?"yes":"no")};setDark(darkVal?darkVal==="yes":sysDark.matches),requestAnimationFrame(()=>bodyClx.remove("not-ready")),btnDark.addEventListener("click",()=>setDark(!bodyClx.contains("dark"))),sysDark.addEventListener("change",e=>setDark(e.matches))</script><nav class=menu><a href=./sitemap.xml>Sitemap</a></nav></header><main class=main><article class=post-single><header class=post-title><p><time>Jun 28, 2024</time>
<span>Martina Birk</span></p><h1>Plotly Dash: How to reset the &amp;quot;n_clicks&amp;quot; attribute of a dash-html.button?</h1></header><section class=post-content><img src=https://cdn.statically.io/img/cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>I have a basic datatable in plotly/dash. My goal is to upload (or print for the sake of the example...) after I press the upload-button.</p><p>The issue is, that I can't figure out how to get the <code>n_clicks</code> attribute of the button back to zero. So what happens is that after I clicked the button for the first time it prints continuously whenever something changes (row added or number changed/added), but what I want is for it to print only once whenever I click the button.</p><p>This is the code:</p><pre><code>import dash from dash.dependencies import Input, Output, State import dash_table import dash_daq as daq import dash_core_components as dcc import dash_html_components as html import pandas as pd external_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css'] df = pd.read_csv('.../dummy_csv.csv') app = dash.Dash(__name__) app.layout = html.Div([ html.Div(id='my-div'), dash_table.DataTable( id='adding-rows-table', style_data={ 'whiteSpace': 'normal', 'height': 'auto' }, style_table={ 'maxHeight': '800px' , 'overflowY': 'scroll' }, columns=[ {'name': i, 'id': i} for i in df.columns ], data=df.to_dict('records'), editable=True, row_deletable=True ), html.Button('+ Row', id='editing-rows-button', n_clicks=0), html.Button('Update', id='btn-nclicks-1', n_clicks=0 ), ]) @app.callback( Output(component_id='my-div', component_property='children'), [Input('btn-nclicks-1', 'n_clicks'), Input('adding-rows-table', 'data')] ) def update_output_div(n_clicks, data): if n_clicks &gt; 0: print(data) # n_clicks = 0 # return n_clicks else: print("else loop") @app.callback( Output('adding-rows-table', 'data'), [Input('editing-rows-button', 'n_clicks')], [State('adding-rows-table', 'data'), State('adding-rows-table', 'columns')]) def add_row(n_clicks, rows, columns): if n_clicks &gt; 0: rows.append({c['id']: '' for c in columns}) return rows if __name__ == '__main__': app.run_server(debug=True) </code></pre><p>This the CSV:</p><pre><code>a,b,c,d 1,1,5,1 2,2,5,1 2,33,6,2 3,4,6,2 </code></pre><p>And <a href=# rel="nofollow noreferrer">this</a> is the "faulty" output.</p><span class=d-none itemprop=commentCount></span><h2 class=mb0 data-answercount=3>3 Answers</h2><p>You could use the <code>dash.callback_context</code> property to trigger the callback only when the number of clicks has changed rather than after the first click. See the section on "Determining which Button Changed with callback_context" in the <a href=# rel="nofollow noreferrer">Dash documentation</a>. The following is an example of how you could update your callback.</p><pre><code>@app.callback(Output(component_id='my-div', component_property='children'), [Input('btn-nclicks-1', 'n_clicks'), Input('adding-rows-table', 'data')]) def update_output_div(n_clicks, data): changed_id = [p['prop_id'] for p in dash.callback_context.triggered][0] if 'btn-nclicks-1' in changed_id: print(data) # n_clicks = 0 # return n_clicks else: print("else loop") </code></pre><span class=d-none itemprop=commentCount>2</span><p>You can reset the <code>n_clicks=None</code> attribute, and it won't trigger an infinite loop when used in combination with a <code>PreventUpdate</code> null condition that you are probably already using.</p><pre><code>@callback( Output('some_btn', 'n_clicks'), Input('some_btn', 'n_clicks') ) def upon_click(n_clicks): if (n_clicks is None): raise PreventUpdate print(n_clicks)#1 return None </code></pre><p>It's a bit more explicit and faster than <code>callback_context</code> ü§∑‚Äç‚ôÇÔ∏è For example, my button's <code>id</code> contained a complex "pattern-matching callback" so I didn't want to parse the callback context for that id</p><span class=d-none itemprop=commentCount></span><p>An option that worked for me is: <code>n_clicks = 0</code> in the button declaration. create list and add click data, then check if next index is greater than current index.</p><p>An approximate example with your code would be:</p><pre><code>list_clicks = [] @app.callback( Output('adding-rows-table', 'data'), [Input('editing-rows-button', 'n_clicks')], [State('adding-rows-table', 'data'), State('adding-rows-table', 'columns')]) def add_row(n_clicks, rows, columns): list_clicks.append(n_clicks) for index in range(len(list_clicks)-1): if list_clicks[index + 1] &gt; list_clicks[index]: list_clicks.clear() rows.append({c['id']: '' for c in columns}) return rows </code></pre><p>clicking on the button n_clicks is increased by 1. What the code block does is compare if the current index is greater than the previous one. If it is greater, it means that the button was clicked.</p><p><code>list_clicks.clear()</code> it is to clean the list and not iterate over the same passed values.</p><p>maybe you could adapt it better to your code!</p><span class=d-none itemprop=commentCount></span><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmirpJawrLvVnqmfpJ%2Bse6S7zGiorp2jqbawutJobWtuZ2Z%2Fc4KOqaOorJyueqWt0qFkoaenYsGwedGeqp6sXam1pnnNZpqloZOgwG6t062popqlqbJuu8VmmGackai1brTTpqNmmqWpwbC6</p></section><nav class=post-nav><a class=prev href=./pauly-shore-celebrates-ke-huy-quan-brendan-frasers-oscar-wins-encino-man-1235553562.html><span>‚Üê</span><span>Pauly Shore Celebrates Ke Huy Quan and Brendan Frasers Oscar Wins, 31 Years After Encino</span></a>
<a class=next href=./kathryne-padgett.html><span>Her Age &amp;amp; Net Worth</span><span>‚Üí</span></a></nav></article></main><footer class=footer><p>&copy; 2024 <a href=./></a></p><p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>HugoÔ∏èÔ∏è</a>Ô∏è</p></footer><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>